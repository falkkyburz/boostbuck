Version 4
SHEET 1 880 880
WIRE -80 0 -96 0
WIRE 128 0 -16 0
WIRE 240 0 128 0
WIRE 272 0 240 0
WIRE 384 0 272 0
WIRE 128 32 128 0
WIRE 384 32 384 0
WIRE 80 112 80 96
WIRE 336 112 336 96
WIRE 240 144 240 0
WIRE -144 176 -192 176
WIRE -96 176 -96 0
WIRE -96 176 -144 176
WIRE -80 176 -96 176
WIRE 80 176 0 176
WIRE 128 176 128 112
WIRE 128 176 80 176
WIRE 384 176 384 112
WIRE 384 176 352 176
WIRE 416 176 384 176
WIRE 528 176 496 176
WIRE 592 176 528 176
WIRE 624 176 592 176
WIRE 128 208 128 176
WIRE 384 208 384 176
WIRE -192 224 -192 176
WIRE -96 224 -96 176
WIRE 528 224 528 176
WIRE 624 224 624 176
WIRE 80 288 80 272
WIRE 336 288 336 272
WIRE -192 352 -192 304
WIRE -96 352 -96 288
WIRE -96 352 -192 352
WIRE 128 352 128 288
WIRE 128 352 -96 352
WIRE 240 352 240 208
WIRE 240 352 128 352
WIRE 384 352 384 288
WIRE 384 352 240 352
WIRE 528 352 528 288
WIRE 528 352 384 352
WIRE 624 352 624 304
WIRE 624 352 528 352
WIRE 240 368 240 352
WIRE -128 656 -128 640
WIRE -32 656 -32 640
WIRE 32 656 32 640
WIRE 96 656 96 640
WIRE 256 656 256 640
WIRE 320 656 320 640
WIRE 384 656 384 640
WIRE -128 752 -128 736
WIRE -32 752 -32 736
WIRE 32 752 32 736
WIRE 96 752 96 736
WIRE 256 752 256 736
WIRE 320 752 320 736
WIRE 384 752 384 736
FLAG 240 368 0
FLAG 80 112 0
FLAG 80 288 0
FLAG 336 112 0
FLAG 336 288 0
FLAG -144 176 in
FLAG 592 176 out
FLAG 272 0 bus
FLAG 80 176 br1
FLAG 352 176 br2
FLAG -128 752 0
FLAG -128 640 tri
FLAG 32 752 0
FLAG -32 752 0
FLAG -32 640 duty1
FLAG 32 640 p1
FLAG 96 752 0
FLAG 96 640 d1
FLAG 80 224 p1
FLAG 336 48 p2
FLAG 80 48 d1
FLAG 336 224 d2
FLAG 320 752 0
FLAG 256 752 0
FLAG 256 640 duty2
FLAG 320 640 p2
FLAG 384 752 0
FLAG 384 640 d2
SYMBOL cap 224 144 R0
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL cap -112 224 R0
SYMATTR InstName C3
SYMATTR Value 10µ
SYMBOL sw 128 128 M180
WINDOW 0 -13 57 Invisible 2
WINDOW 3 15 96 Invisible 2
SYMATTR InstName S2
SYMATTR Value SW1
SYMBOL ind -96 192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 20µ
SYMBOL sw 128 304 M180
WINDOW 0 -13 57 Invisible 2
WINDOW 3 17 110 Invisible 2
SYMATTR InstName S1
SYMATTR Value SW1
SYMBOL voltage -192 208 R0
WINDOW 3 -32 166 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(0 {vin} 0 100u 1)
SYMBOL Misc\\EuropeanResistor 608 208 R0
SYMATTR InstName R1
SYMATTR Value {vout/iout}
SYMBOL sw 384 128 M180
WINDOW 0 -13 57 Invisible 2
WINDOW 3 15 96 Invisible 2
SYMATTR InstName S3
SYMATTR Value SW1
SYMBOL sw 384 304 M180
WINDOW 0 -13 57 Invisible 2
WINDOW 3 17 110 Invisible 2
SYMATTR InstName S4
SYMATTR Value SW1
SYMBOL ind 400 192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 20µ
SYMBOL cap 512 224 R0
SYMATTR InstName C2
SYMATTR Value 50µ
SYMBOL voltage -128 640 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -26 217 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 1 0 {10u-10n} 10n 0 10u)
SYMBOL bv 32 640 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -32 153 Invisible 2
SYMATTR InstName B1
SYMATTR Value V=if(V(tri)<V(duty1), 1, 0)
SYMBOL voltage -32 640 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -10 152 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PULSE(-1m {1-vin/vbus} 1m 5m 1 1)
SYMBOL bv 96 640 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -32 153 Invisible 2
SYMATTR InstName B2
SYMATTR Value V=if(V(tri)>V(duty1), 1, 0)
SYMBOL diode -80 16 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value D1
SYMBOL bv 320 640 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -32 153 Invisible 2
SYMATTR InstName B3
SYMATTR Value V=if(V(tri)<V(duty2), 1, 0)
SYMBOL voltage 256 640 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -39 190 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(-1m {vout/vbus} 6m 5m 1 1)
SYMBOL bv 384 640 R0
WINDOW 0 24 16 Invisible 2
WINDOW 3 -32 153 Invisible 2
SYMATTR InstName B4
SYMATTR Value V=if(V(tri)>V(duty2), 1, 0)
TEXT -56 496 Left 2 !.model SW1 SW(Ron=1m Roff=1Meg Vt=0.5 Vh=-0.25)
TEXT 166 536 Left 2 !.tran 0 15m 0 10n uic
TEXT -56 472 Left 2 !.model D1 D(Ron=.01 Roff=1Meg Vfwd=.7)
TEXT 496 0 Left 2 !.param vin = 30
TEXT 496 24 Left 2 !.param vout = 15
TEXT 496 72 Left 2 !.param vbus = 40
TEXT 496 48 Left 2 !.param iout = 6
